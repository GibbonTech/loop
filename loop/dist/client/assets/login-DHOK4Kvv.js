import{r as o,j as e,L as l,t as n}from"./main-DVSPLy5u.js";import{u as p,s as b}from"./auth-client-CUz6Nxzj.js";import{A as g}from"./arrow-left-PN0Ay6Ui.js";import"./createLucideIcon-CN_IBe7f.js";function v(){const{data:r}=p(),[i,x]=o.useState(""),[c,f]=o.useState(""),[d,m]=o.useState(!1),h=async s=>{var u;s.preventDefault(),m(!0);try{const a=await b.email({email:i,password:c});if(a.error)n.error(a.error.message||"Identifiants incorrects");else{n.success("Connexion réussie");const t=(u=a.data)==null?void 0:u.user;(t==null?void 0:t.role)==="ADMIN"?window.location.href="/admin":window.location.href="/espace"}}catch{n.error("Erreur de connexion")}finally{m(!1)}};return r!=null&&r.user?(r.user.role==="ADMIN"?window.location.href="/admin":window.location.href="/espace",null):e.jsxs("div",{className:"flex min-h-screen flex-col bg-[#f2f2f0]",children:[e.jsx("header",{className:"px-4 py-6",children:e.jsxs(l,{to:"/",className:"inline-flex items-center gap-2 text-sm text-gray-500 hover:text-[#fd521a]",children:[e.jsx(g,{className:"h-4 w-4"}),"Retour à l'accueil"]})}),e.jsx("main",{className:"flex flex-1 items-center justify-center px-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx(l,{to:"/",className:"inline-block",children:e.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-[#fd521a]",children:e.jsx("div",{className:"h-3 w-3 rounded-full bg-white"})})}),e.jsx("h1",{className:"text-2xl font-bold",children:"Connexion"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Accédez à votre espace Driivo"})]}),e.jsxs("form",{onSubmit:h,className:"rounded-2xl border border-gray-200 bg-white p-8 shadow-sm",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"mb-2 block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{id:"email",type:"email",value:i,onChange:s=>x(s.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-[#fd521a] focus:outline-none focus:ring-2 focus:ring-[#fd521a]/20",placeholder:"votre@email.com",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"password",className:"mb-2 block text-sm font-medium text-gray-700",children:"Mot de passe"}),e.jsx("input",{id:"password",type:"password",value:c,onChange:s=>f(s.target.value),className:"w-full rounded-xl border border-gray-200 px-4 py-3 focus:border-[#fd521a] focus:outline-none focus:ring-2 focus:ring-[#fd521a]/20",placeholder:"••••••••",required:!0})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full rounded-xl bg-[#fd521a] py-3 font-bold text-white transition-all hover:bg-[#e0410e] disabled:cursor-not-allowed disabled:opacity-70",children:d?"Connexion...":"Se connecter"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Pas encore inscrit ?"," ",e.jsx(l,{to:"/inscription",className:"font-medium text-[#fd521a] hover:underline",children:"Rejoindre Driivo"})]})})]})})]})}export{v as component};
