import{a as b,r as i,j as e,L as x}from"./main-BiKzh8FQ.js";import{u as v}from"./auth-client-DPcuyBI0.js";import{c as h}from"./createLucideIcon-BjhWcqz3.js";import{C as y}from"./circle-check-big-C6jOTnQk.js";import{C as E}from"./circle-x-CJnBQjnP.js";import{C as w}from"./clock-CMBGZELv.js";import{P as C}from"./phone-BZIhII6P.js";import{C as R}from"./car-VTxE_dSM.js";import{C as D}from"./calendar-DcB79T1Q.js";/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],P=h("arrow-left",A);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],V=h("mail",T);function M(){var o;const{id:r}=b.useParams(),{data:n,isPending:p}=v(),[s,d]=i.useState(null),[u,g]=i.useState(!0),[l,m]=i.useState(!1);i.useEffect(()=>{N()},[r]);const N=async()=>{try{const a=await(await fetch(`/api/applications?id=${r}`)).json();a.success&&a.data&&d(a.data)}catch(t){console.error("Error fetching application:",t)}finally{g(!1)}},c=async t=>{m(!0);try{await fetch("/api/applications",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r,status:t})}),d(a=>a?{...a,status:t}:null)}catch(a){console.error("Error updating status:",a)}finally{m(!1)}};if(p||u)return e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-8 w-8 animate-spin rounded-full border-4 border-[#fd521a] border-t-transparent"}),e.jsx("p",{className:"mt-4 text-gray-500",children:"Chargement..."})]})});if(!s)return e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500",children:"Application non trouvée"}),e.jsx(x,{to:"/admin",className:"mt-4 text-[#fd521a] hover:underline",children:"Retour au tableau de bord"})]})});const j={SUBMITTED:"bg-amber-100 text-amber-800",APPROVED:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800",UNDER_REVIEW:"bg-blue-100 text-blue-800"},f={SUBMITTED:"En attente",APPROVED:"Approuvée",REJECTED:"Refusée",UNDER_REVIEW:"En cours d'examen"};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"border-b border-gray-200 bg-white",children:e.jsxs("div",{className:"mx-auto flex h-16 max-w-5xl items-center justify-between px-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(x,{to:"/admin",className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[e.jsx(P,{className:"h-4 w-4"}),"Retour"]}),e.jsx("div",{className:"h-6 w-px bg-gray-200"}),e.jsx("span",{className:"text-lg font-bold tracking-tight",children:"Détail candidature"})]}),e.jsx("span",{className:"text-sm text-gray-500",children:(o=n==null?void 0:n.user)==null?void 0:o.email})]})}),e.jsxs("main",{className:"mx-auto max-w-5xl px-4 py-8",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between rounded-xl border border-gray-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:`inline-flex rounded-full px-3 py-1 text-sm font-medium ${j[s.status]||"bg-gray-100 text-gray-800"}`,children:f[s.status]||s.status}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Soumise le ",new Date(s.createdAt).toLocaleDateString("fr-FR")]})]}),e.jsxs("div",{className:"flex gap-2",children:[s.status!=="APPROVED"&&e.jsxs("button",{onClick:()=>c("APPROVED"),disabled:l,className:"flex items-center gap-2 rounded-lg bg-green-600 px-4 py-2 text-sm font-medium text-white hover:bg-green-700 disabled:opacity-50",children:[e.jsx(y,{className:"h-4 w-4"}),"Approuver"]}),s.status!=="REJECTED"&&e.jsxs("button",{onClick:()=>c("REJECTED"),disabled:l,className:"flex items-center gap-2 rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 disabled:opacity-50",children:[e.jsx(E,{className:"h-4 w-4"}),"Refuser"]}),s.status!=="UNDER_REVIEW"&&e.jsxs("button",{onClick:()=>c("UNDER_REVIEW"),disabled:l,className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(w,{className:"h-4 w-4"}),"En examen"]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6",children:[e.jsx("h2",{className:"mb-4 font-bold",children:"Informations personnelles"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium uppercase text-gray-400",children:"Nom complet"}),e.jsxs("div",{className:"text-lg font-medium",children:[s.firstName," ",s.lastName]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{className:"h-4 w-4 text-gray-400"}),e.jsx("a",{href:`mailto:${s.email}`,className:"text-[#fd521a] hover:underline",children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{className:"h-4 w-4 text-gray-400"}),e.jsx("a",{href:`tel:${s.phone}`,className:"hover:underline",children:s.phone||"Non renseigné"})]})]})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6",children:[e.jsx("h2",{className:"mb-4 font-bold",children:"Activité VTC"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium uppercase text-gray-400",children:"Type d'activité"}),e.jsx("div",{className:"font-medium",children:s.activityType||"VTC"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium uppercase text-gray-400",children:"Carte VTC"}),e.jsx("div",{className:"font-medium",children:s.hasVtcLicense||"Non renseigné"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium uppercase text-gray-400",children:"Expérience"}),e.jsx("div",{className:"font-medium",children:s.yearsExperience||"Non renseigné"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium uppercase text-gray-400",children:"CA mensuel visé"}),e.jsx("div",{className:"font-medium",children:s.monthlyRevenue||"Non renseigné"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium uppercase text-gray-400",children:"Plateformes"}),e.jsx("div",{className:"font-medium",children:s.currentPlatforms||"Non renseigné"})]})]})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6",children:[e.jsxs("h2",{className:"mb-4 flex items-center gap-2 font-bold",children:[e.jsx(R,{className:"h-5 w-5"}),"Véhicule"]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium uppercase text-gray-400",children:"Possède un véhicule"}),e.jsx("div",{className:"font-medium",children:s.hasVehicle==="yes"?"Oui":"Non"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium uppercase text-gray-400",children:"Type de véhicule"}),e.jsx("div",{className:"font-medium",children:s.vehicleType||"Non renseigné"})]})]})})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-6",children:[e.jsxs("h2",{className:"mb-4 flex items-center gap-2 font-bold",children:[e.jsx(D,{className:"h-5 w-5"}),"Historique"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Candidature créée"}),e.jsx("span",{className:"ml-2 text-gray-500",children:new Date(s.createdAt).toLocaleString("fr-FR")})]})]}),s.submittedAt&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-500"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:"Soumise"}),e.jsx("span",{className:"ml-2 text-gray-500",children:new Date(s.submittedAt).toLocaleString("fr-FR")})]})]})]})]})]})]})]})}export{M as component};
